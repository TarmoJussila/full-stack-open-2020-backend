(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var o=t(0),c=t(2),r=t.n(c),u=t(15),a=t.n(u),s=t(6),i=t(3),l=t(4),d=t.n(l),j="/api/persons",b=function(){return d.a.get(j).then((function(e){return e.data}))},f=function(e){return d.a.post(j,e).then((function(e){return e.data}))},h=function(e,n){return d.a.put("".concat(j,"/").concat(e),n).then((function(e){return e.data}))},m=function(e){return d.a.delete("".concat(j,"/").concat(e)).then((function(e){return e.data}))},O=function(e){return Object(o.jsxs)("form",{onSubmit:e.onSubmit,children:[Object(o.jsxs)("div",{children:["Name: ",Object(o.jsx)("input",{value:e.nameValue,onChange:e.onNameChange})]}),Object(o.jsxs)("div",{children:["Number: ",Object(o.jsx)("input",{value:e.numberValue,onChange:e.onNumberChange})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"Add"})})]})},v=function(e){var n=e.persons,t=e.onDeletePerson;return Object(o.jsx)("div",{children:n.map((function(e){return Object(o.jsx)(p,{person:e,onDeletePerson:t},e.id)}))})},p=function(e){var n=e.person,t=e.onDeletePerson;return Object(o.jsx)("div",{children:Object(o.jsxs)("p",{children:[n.name," ",n.number," "," ",Object(o.jsx)("input",{type:"submit",value:"Delete",onClick:function(){t(n.id,n.name)}})]})})},x=function(e){return Object(o.jsxs)("div",{children:["Filter shown with: ",Object(o.jsx)("input",{value:e.filterValue,onChange:e.onFilterChange})]})},w=function(e){var n=e.message,t=e.isError;return null===n?null:t?Object(o.jsx)("div",{className:"error",children:n}):Object(o.jsx)("div",{className:"success",children:n})},g=function(){var e=Object(c.useState)([]),n=Object(i.a)(e,2),t=n[0],r=n[1],u=Object(c.useState)(""),a=Object(i.a)(u,2),l=a[0],d=a[1],j=Object(c.useState)(""),p=Object(i.a)(j,2),g=p[0],C=p[1],y=Object(c.useState)(""),P=Object(i.a)(y,2),S=P[0],N=P[1],L=Object(c.useState)(null),T=Object(i.a)(L,2),k=T[0],D=T[1],V=Object(c.useState)(null),E=Object(i.a)(V,2),A=E[0],F=E[1];Object(c.useEffect)((function(){b().then((function(e){r(e)})).catch((function(e){F("Person data could not be received from the server!"),setTimeout((function(){F(null)}),5e3)}))}),[]);var J=0===S.length?t:t.filter((function(e){return e.name.toLowerCase().includes(S.toLowerCase())}));return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)(w,{message:k,isError:!1}),Object(o.jsx)(w,{message:A,isError:!0}),Object(o.jsx)(x,{filterValue:S,onFilterChange:function(e){N(e.target.value)}}),Object(o.jsx)("h3",{children:"Add a new"}),Object(o.jsx)(O,{onSubmit:function(e){if(e.preventDefault(),t.some((function(e){return e.name.toLowerCase()===l.toLowerCase()}))){if(window.confirm("The name ".concat(l," is already added to the phonebook. Do you wish to replace the old number with a new one?"))){var n=t.find((function(e){return e.name.toLowerCase()===l.toLowerCase()})),o=Object(s.a)(Object(s.a)({},n),{},{number:g});h(o.id,o).then((function(e){D("Person '".concat(o.name,"' was successfully updated!")),setTimeout((function(){D(null)}),5e3),r(t.map((function(n){return n.name.toLowerCase()!==l.toLowerCase()?n:e})))})).catch((function(e){F("Person '".concat(o.name,"' has been already removed from the server!")),setTimeout((function(){F(null)}),5e3),r(t.filter((function(e){return e.id!==o.id})))}))}}else{var c={name:l,number:g};f(c).then((function(e){D("Person '".concat(c.name,"' was successfully added!")),setTimeout((function(){D(null)}),5e3),r(t.concat(e)),d(""),C("")})).catch((function(e){F("Person '".concat(c.name,"' could not be added to the server!")),setTimeout((function(){F(null)}),5e3)}))}},nameValue:l,numberValue:g,onNameChange:function(e){d(e.target.value)},onNumberChange:function(e){C(e.target.value)}}),Object(o.jsx)("h3",{children:"Numbers"}),Object(o.jsx)(v,{persons:J,onDeletePerson:function(e,n){window.confirm("Are you sure you want to delete ".concat(n,"?"))&&m(e).then((function(){D("Person '".concat(n,"' was successfully deleted!")),setTimeout((function(){D(null)}),5e3),r(t.filter((function(n){return n.id!==e})))})).catch((function(o){F("Person '".concat(n,"' has been already removed from the server!")),setTimeout((function(){F(null)}),5e3),r(t.filter((function(n){return n.id!==e})))}))}})]})};t(38);a.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(g,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.dbd36ce5.chunk.js.map